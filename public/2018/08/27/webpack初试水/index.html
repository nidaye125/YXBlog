<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="前端匍匐前进">
    <meta name="keyword"  content="前端">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        webpack单页应用和多页应用搭建初试水（一） - ......
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> less code more art. </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar">
            <img src="/img/avatar.jpg" />
        </div>
        <div class="name">
            <i>......</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archive">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#在此处输入标题"><span class="toc-text">在此处输入标题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-单页应用"><span class="toc-text">1.单页应用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-index-js"><span class="toc-text">1.1 index.js</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-index-html"><span class="toc-text">1.2 index.html</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-webpack-config-js"><span class="toc-text">1.3 webpack.config.js</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-packgae-json"><span class="toc-text">1.4 packgae.json</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-多页应用"><span class="toc-text">2.多页应用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-页面请都放在pages-下面"><span class="toc-text">2.1.页面请都放在pages/下面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-index-js"><span class="toc-text">2.2 index.js</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-index-html"><span class="toc-text">2.3 index.html</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-webpack-config-js"><span class="toc-text">2.4 webpack.config.js</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-package-json"><span class="toc-text">2.5 package.json</span></a></li></ol></li></ol></li></ol></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>
        <div class="index-about-mobile">
            <i> less code more art. </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        webpack单页应用和多页应用搭建初试水（一）
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2018-08-27 16:05:40</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#webpack" title="webpack">webpack</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <p>虽然之前研究过一些webpack配置，但是也没有着手去做过。再者平时的demo也都是基于react的，所以不得不使用webpack，这里就随便写个单页和多页的webpack。</p>
<p>前提，不考虑任何优化，什么代码分割，什么图片压缩，什么公共代码提取都一边去，这是最最简单的可以使用的单页和多页的应用.希望你还是要懂得一些基本的webpack配置，比如entry，output等等，如果这些也不是很清楚请直接ctrl+c ctrl+v<br><a id="more"></a></p>
<h1 id="在此处输入标题"><a href="#在此处输入标题" class="headerlink" title="在此处输入标题"></a>在此处输入标题</h1><h3 id="1-单页应用"><a href="#1-单页应用" class="headerlink" title="1.单页应用"></a>1.单页应用</h3><p>对应的就是一个页面，所有的功能请在一个页面实现，那么只需要两个文件：index.js和index.html。</p>
<h4 id="1-1-index-js"><a href="#1-1-index-js" class="headerlink" title="1.1 index.js"></a>1.1 index.js</h4><p>随便你想怎么拆分都行，随便你想引入什么文件都可以，请最后一定要有一句</p>
<pre><code>ReactDOM.render(
    &lt;h1&gt;haha&lt;/h1&gt;,
    document.querySelector(&apos;#main&apos;)
);
</code></pre><p>注意：<br>    1.import ReactDOM  from ‘react-dom’;<br>    2.index.html一定要有<code>&lt;div id=&quot;main&quot;&gt;&lt;/div&gt;</code></p>
<h4 id="1-2-index-html"><a href="#1-2-index-html" class="headerlink" title="1.2 index.html"></a>1.2 index.html</h4><pre><code>&lt;html&gt;
  &lt;body&gt;
    &lt;div id=&quot;main&quot;&gt;&lt;/div&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;./bundle.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre><p> 注意：<br> 1.bundle.js命名以及路径与webpack.config.js有关系</p>
<h4 id="1-3-webpack-config-js"><a href="#1-3-webpack-config-js" class="headerlink" title="1.3 webpack.config.js"></a>1.3 webpack.config.js</h4><pre><code>var path  = require(&apos;path&apos;);
module.exports = {
  devtool: &apos;#source-map&apos;,
  entry: &apos;./main.js&apos;,
  output: {
    filename: &apos;bundle.js&apos;,
    // path: path.resolve(__dirname, &apos;dist&apos;),
  },
  module: {
    rules: [
      {
        test: /\.js?$/,
        exclude: /node_modules/,
        use: {
          loader: &apos;babel-loader&apos;,
          options: {
            presets: [&apos;es2015&apos;, &apos;react&apos;]
          }
        }
      },
      {

        test: /\.css$/,
        use: [
          {
            loader: &apos;style-loader&apos;
          },
          {
             loader: &apos;css-loader&apos;,

          }
        ]
      }
    ]
  },
};
</code></pre><h4 id="1-4-packgae-json"><a href="#1-4-packgae-json" class="headerlink" title="1.4 packgae.json"></a>1.4 packgae.json</h4><pre><code>&quot;scripts&quot;: {
    &quot;start&quot;: &quot;webpack-dev-server --inline   --open&quot;,
    &quot;build&quot;: &quot;webpack --config webpack.config.js -p&quot;
  },
</code></pre><h3 id="2-多页应用"><a href="#2-多页应用" class="headerlink" title="2.多页应用"></a>2.多页应用</h3><p>多页应用其实要做好需要做很多，关键有公共代码的提取，毕竟每个页面差不多都要引入react 、react-dom等等一些公共文件，如果不提出来那么基础每夜会造成文件有点大，但是我们这里全都不考虑。</p>
<p>多页的应用关键就在于一个插件的使用：<br>htmlwebpackplugin，为了生成多个html</p>
<h4 id="2-1-页面请都放在pages-下面"><a href="#2-1-页面请都放在pages-下面" class="headerlink" title="2.1.页面请都放在pages/下面"></a>2.1.页面请都放在pages/下面</h4><p>建立一个单独的文件夹，login/, 下面需有index.js 和 index.html</p>
<h4 id="2-2-index-js"><a href="#2-2-index-js" class="headerlink" title="2.2 index.js"></a>2.2 index.js</h4><pre><code>import ReactDOM  from &apos;react-dom&apos;;
import React, { Component } from &apos;react&apos;;
import &apos;./index.css&apos;;

ReactDOM.render(&lt;h1&gt;这里是page1&lt;/h1&gt;, document.getElementById(&apos;main&apos;));
</code></pre><h4 id="2-3-index-html"><a href="#2-3-index-html" class="headerlink" title="2.3 index.html"></a>2.3 index.html</h4><pre><code>&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
        &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;
        &lt;title&gt;锚点&lt;/title&gt;
    &lt;/head&gt;
  &lt;body&gt;
    &lt;div id=&quot;main&quot;&gt;&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre><h4 id="2-4-webpack-config-js"><a href="#2-4-webpack-config-js" class="headerlink" title="2.4 webpack.config.js"></a>2.4 webpack.config.js</h4><pre><code>var path = require(&apos;path&apos;);
var glob = require(&apos;glob&apos;);
// const webpack = require(&apos;webpack&apos;);
const ExtractTextPlugin = require(&apos;extract-text-webpack-plugin&apos;);
const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);
const CleanWebpackPlugin = require(&apos;clean-webpack-plugin&apos;);
var entries = {}, chunks = [],plugins=[];

glob.sync(&apos;./pages/*/index.js&apos;).forEach(path =&gt; {
  const chunk = path.split(&apos;./pages/&apos;)[1].split(&apos;/index.js&apos;)[0];
  entries[chunk] = path;
  chunks.push(chunk);
});
glob.sync(&apos;./pages/*/index.html&apos;).forEach(path =&gt; {
  const chunk = path.split(&apos;./pages/&apos;)[1].split(&apos;/index.html&apos;)[0];
  const filename = chunk + &apos;.html&apos;;
  const htmlConf = {
    filename: filename,
    template:  path,
    inject: true,
    favicon: &apos;&apos;,
    hash: true,
    // 每个html引用的js模块，也可以在这里加上vendor等公用模块
    chunks: [chunk]
  }
  plugins.push(new HtmlWebpackPlugin(htmlConf));
});

module.exports = {
  devtool:&apos;#source-map&apos;,
  entry: entries,
  output: {
    filename: &apos;bundle_[name].js&apos;,
    path:path.join(__dirname,&apos;dist&apos;)
  },
  module: {
    rules: [
      {
        test: /\.js?$/,
        exclude: /node_modules/,
        use: {
          loader: &apos;babel-loader&apos;,
          options: {
            presets: [&apos;es2015&apos;, &apos;react&apos;]
          }
        }
      },
      {

        test: /\.css$/,
        use:ExtractTextPlugin.extract({
          use: [
            &apos;css-loader&apos;
          ],
          fallback: &apos;style-loader&apos;
        })
      }
    ]
  },
  plugins:[
    new ExtractTextPlugin({
      filename: &apos;[name].css&apos;, 
    }),
    new CleanWebpackPlugin([&quot;dist&quot;]),
    ...plugins,
  ],
  devServer:{
    inline: true, // hot load
    // contentBase: &apos;./pages&apos;,
    https:false,
    open:true,
  }
};
</code></pre><h4 id="2-5-package-json"><a href="#2-5-package-json" class="headerlink" title="2.5 package.json"></a>2.5 package.json</h4><pre><code>&quot;scripts&quot;: {
    &quot;dev&quot;: &quot;webpack-dev-server --hot&quot;,
    &quot;build&quot;: &quot;webpack &quot;
  },
</code></pre>
        
            <div class="donate-container">
    <div class="donate-button">
        <button id="donate-button">赞赏</button>
    </div>
    <div class="donate-img-container hide" id="donate-img-container">
        <img id="donate-img" src="" data-src="/img/donate.jpg">
        <p> 感谢鼓励 </p>
    </div>
</div>
        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>
    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        

        

    </ul>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
